<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´€éŒ„</title>
    <link rel="stylesheet" href="record.css">
</head>
<body>
    <div class="phone">
        <!-- é ‚éƒ¨ç‹€æ…‹æ¬„ -->
        <div class="status-bar">
            <div class="left">
                <span class="time">14:30</span>
            </div>
            <div class="right">
                <span class="signal">ğŸ“¶</span>
                <span class="wifi">ğŸ“¡</span>
                <span class="battery">ğŸ”‹</span>
            </div>
        </div>

         <!-- é ‚éƒ¨å°èˆªæ¬„ -->
         <div class="nav-header">
            <a href="finger.html" class="back-btn">
                <span class="icon"><img src="./img/img1.png" alt="back"></span>
            </a>
            <h2>ç´€éŒ„</h2>
            <a href="record.html" class="record-btn">
                <span><img src="./img/img2.png" alt="record"></span>
            </a>
        </div>


        <div class="content">
            <div class="chart-box">
                <div class="semi-circle-chart">
                    <div class="chart-content">
                        <div class="chart-value">0%</div>
                        <div class="chart-label">æœ¬æœˆä½¿ç”¨ç‡</div>
                    </div>
                </div>
                <div class="chart-stats">
                    <div class="stat-item">
                        <div class="stat-value">0æ¬¡</div>
                        <div class="stat-label">æœ¬æœˆæ¬¡æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">0å°æ™‚</div>
                        <div class="stat-label">æœ¬æœˆæ™‚æ•¸</div>
                    </div>
                </div>
            </div>
            
            <div class="record-box">
                <div class="record-header">
                    <h2>ä½¿ç”¨ç´€éŒ„</h2>
                    <select id="monthSelect">
                        <option value="1-2">1æœˆ-2æœˆ </option>
                        <option value="3-4">3æœˆ-4æœˆ </option>
                        <option value="5-6" selected>5æœˆ-6æœˆ </option>
                        <option value="7-8">7æœˆ-8æœˆ </option>
                        <option value="9-10">9æœˆ-10æœˆ </option>
                        <option value="11-12">11æœˆ-12æœˆ </option>
                    </select>
                </div>
                <table class="record-table">
                    <thead>
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>é–‹å§‹æ™‚é–“</th>
                            <th>çµæŸæ™‚é–“</th>
                        </tr>
                    </thead>
                    <tbody id="recordBody">
                        <!-- è¨˜éŒ„å°‡ç”± JavaScript å‹•æ…‹æ·»åŠ  -->
                    </tbody>
                </table>
            </div>

            <div class="stats-box">
                <div class="stats-header">
                    <h2>ä½¿ç”¨çµ±è¨ˆ</h2>
                </div>
                <div class="stats-content">
                    <div class="stats-item">
                        <span class="stats-label">ä½¿ç”¨æ¬¡æ•¸</span>
                        <span class="stats-value" id="usageCount">0æ¬¡</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-label">ç¸½ä½¿ç”¨æ™‚æ•¸</span>
                        <span class="stats-value" id="totalHours">0å°æ™‚</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-label">è¡€å£“è¨˜éŒ„</span>
                        <span class="stats-value">--</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-label">åº·å¾©é€²åº¦</span>
                        <div class="progress-bar">
                            <div class="progress" id="recoveryProgress"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    // ç”Ÿæˆéš¨æ©Ÿæ™‚é–“
    function generateRandomTime() {
        const hours = String(Math.floor(Math.random() * 14) + 8).padStart(2, '0'); // 8:00 - 22:00
        const minutes = String(Math.floor(Math.random() * 4) * 15).padStart(2, '0'); // 00, 15, 30, 45
        return hours + ':' + minutes;
    }

    // ç”Ÿæˆéš¨æ©Ÿè¨˜éŒ„
    function generateRecords(monthPair) {
        const records = [];
        const [startMonth, endMonth] = monthPair.split('-').map(Number);
        const count = Math.floor(Math.random() * 3) + 10; // æ”¹ç‚º 5-7 æ¢è¨˜éŒ„

        for (let i = 0; i < count; i++) {
            const month = Math.random() < 0.5 ? startMonth : endMonth;
            const day = Math.floor(Math.random() * 28) + 1;
            const startTime = generateRandomTime();
            const endHour = parseInt(startTime.split(':')[0]) + 1;
            const endTime = `${String(endHour).padStart(2, '0')}:${startTime.split(':')[1]}`;

            records.push({
                date: `2024. ${String(month).padStart(2, '0')}. ${String(day).padStart(2, '0')}`,
                startTime,
                endTime
            });
        }

        return records.sort((a, b) => new Date(a.date) - new Date(b.date));
    }

    // æ›´æ–°è¡¨æ ¼å…§å®¹
    function updateTable(monthPair) {
        const records = generateRecords(monthPair);
        const recordBody = document.getElementById('recordBody');
        recordBody.innerHTML = '';
        
        records.forEach(record => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${record.date}</td>
                <td>${record.startTime}</td>
                <td>${record.endTime}</td>
            `;
            recordBody.appendChild(row);
        });

        // æ›´æ–°ä½¿ç”¨çµ±è¨ˆ
        updateStats(records);
    }

    // æ›´æ–°åœ–è¡¨å’Œçµ±è¨ˆæ•¸æ“š
    function updateStats(records) {
        // è¨ˆç®—æœ¬æœˆä½¿ç”¨ç‡
        const daysInMonth = 30;
        const usageDays = new Set(records.map(record => record.date.split('.')[2])).size;
        const usageRate = Math.round((usageDays / daysInMonth) * 100);

        // æ›´æ–°åŠåœ“åœ–
        const semiCircle = document.querySelector('.semi-circle-chart');
        semiCircle.style.setProperty('--percentage', usageRate + '%');
        document.querySelector('.chart-value').textContent = usageRate + '%';

        // æ›´æ–°æœ¬æœˆçµ±è¨ˆ
        const monthlyCount = records.length;
        let totalMinutes = 0;
        records.forEach(record => {
            const startTime = record.startTime.split(':').map(Number);
            const endTime = record.endTime.split(':').map(Number);
            const duration = (endTime[0] - startTime[0]) * 60 + (endTime[1] - startTime[1]);
            totalMinutes += duration;
        });
        
        const totalHours = Math.floor(totalMinutes / 60);
        
        // æ›´æ–°çµ±è¨ˆæ•¸å€¼
        document.querySelector('.chart-stats .stat-item:first-child .stat-value').textContent = 
            monthlyCount + 'æ¬¡';
        document.querySelector('.chart-stats .stat-item:last-child .stat-value').textContent = 
            totalHours + 'å°æ™‚';

        // æ›´æ–°åŸæœ‰çš„çµ±è¨ˆå€åŸŸ
        document.getElementById('usageCount').textContent = `${monthlyCount}æ¬¡`;
        document.getElementById('totalHours').textContent = `${totalHours}å°æ™‚`;

        // æ›´æ–°åº·å¾©é€²åº¦
        const progress = Math.min(usageRate, 100);
        const progressBar = document.getElementById('recoveryProgress');
        progressBar.style.width = `${progress}%`;
    }

    // ç›£è½ä¸‹æ‹‰é¸å–®è®ŠåŒ–
    document.getElementById('monthSelect').addEventListener('change', (e) => {
        updateTable(e.target.value);
    });

    // åˆå§‹åŒ–è¡¨æ ¼
    updateTable('5-6');
});
    </script>
</body>
</html>