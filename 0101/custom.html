<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªå®šç¾©æ‰‹å‹¢</title>
    <link rel="stylesheet" href="custom.css">
</head>
<body>
    <div class="phone">
        <!-- é ‚éƒ¨ç‹€æ…‹æ¬„ -->
        <div class="status-bar">
            <div class="left">
                <span class="time">14:30</span>
            </div>
            <div class="right">
                <span class="signal">ğŸ“¶</span>
                <span class="wifi">ğŸ“¡</span>
                <span class="battery">ğŸ”‹</span>
            </div>
        </div>

        <!-- é ‚éƒ¨å°èˆªæ¬„ -->
        <div class="nav-header">
            <a href="finger.html" class="back-btn">
                <span class="icon"><img src="./img/img1.png" alt="back"></span>
            </a>
            <h2>è‡ªå®šç¾©æ‰‹å‹¢</h2>
            <a href="record.html" class="record-btn">
                <span><img src="./img/img2.png" alt="record"></span>
            </a>
        </div>

        <!-- åœ¨ nav-header å¾Œæ·»åŠ é¸æ“‡æ¨¡å¼æŒ‰éˆ• -->
        <div class="selection-mode">
            <button class="mode-btn active" data-mode="individual">å€‹åˆ¥é¸å–</button>
            <button class="mode-btn" data-mode="all">å…¨é¸</button>
        </div>

        <!-- æ‰‹éƒ¨åœ–ç‰‡é¡¯ç¤ºå€åŸŸ -->
        <div class="hand-display">
            <div class="interaction-points">
                <!-- å¤§æ‹‡æŒ‡çš„äº’å‹•é» -->
                <div class="point" data-finger="thumb" style="top: 53%; left: 93%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="thumb" style="top: 66%; left: 82%;">
                    <div class="point-dot"></div>
                </div>
                <!-- å…¶ä»–æ‰‹æŒ‡çš„äº’å‹•é» -->
                <!-- ç„¡åæŒ‡ -->
                <div class="point" data-finger="index" style="top: 19%; left: 32%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="index" style="top: 29%; left: 34%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="index" style="top: 40%; left: 36%;">
                    <div class="point-dot"></div>
                </div>
                <!-- ä¸­æŒ‡ -->
                <div class="point" data-finger="middle" style="top: 13%; left: 50%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="middle" style="top: 25%; left: 50%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="middle" style="top: 38%; left: 50%;">
                    <div class="point-dot"></div>
                </div>
                <!-- é£ŸæŒ‡ -->
                <div class="point" data-finger="ring" style="top: 19%; left: 72%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="ring" style="top: 30%; left: 68%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="middle" style="top: 42%; left: 65%;">
                    <div class="point-dot"></div>
                </div>
                <!-- å°æŒ‡ -->
                <div class="point" data-finger="pinky" style="top: 31%; left: 14%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="middle" style="top: 39%; left: 19%;">
                    <div class="point-dot"></div>
                </div>
                <div class="point" data-finger="pinky" style="top: 47%; left: 22%;">
                    <div class="point-dot"></div>
                </div>
            </div>
            <img src="./img/left-hand-diagram.png" alt="æ‰‹éƒ¨ç¤ºæ„åœ–" class="hand-image">
        </div>

        <!-- æ»‘å‹•æ§åˆ¶å€åŸŸ -->
        <div class="slider-control">
            <div class="slider-header">
                <button class="select-all-btn">å…¨é¸</button>
            </div>
            <div class="slider-labels">
                <span>å½æ›²</span>
                <span>ä¼¸å±•</span>
            </div>
            <div class="slider-container">
                <input type="range" min="0" max="100" value="50" class="slider">
            </div>
        </div>

        <!-- äº’å‹•é»çš„å½ˆçª— -->
        <div class="point-modal" id="pointModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>èª¿æ•´æ§åˆ¶é»</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="slider-container">
                        <div class="slider-labels">
                            <span>å½æ›²</span>
                            <span>ä¼¸å±•</span>
                        </div>
                        <input type="range" min="0" max="100" value="50" class="modal-slider">
                        <div class="slider-value">50%</div>
                    </div>
                    <button class="save-btn">ä¿å­˜</button>
                </div>
            </div>
        </div>

        <!-- æ³¨æ„äº‹é … -->
        <div class="notice">
            <div class="notice-item">
                <span class="text">é¸æ“‡è¦æ“æ§çš„æ‰‹æŒ‡</span>
            </div>
        </div>

        <!-- åº•éƒ¨æŒ‰éˆ•å€åŸŸ -->
        <div class="bottom-buttons">
            <button class="save-all-btn">å„²å­˜</button>
            <button class="reset-btn">é‡ç½®</button>
        </div>

        <!-- æ·»åŠ ä¿å­˜ç¢ºèªå½ˆçª— -->
        <div class="modal" id="saveConfirmModal">
            <div class="modal-content">
                <p>æ˜¯å¦ç¢ºå®šä¿å­˜ï¼Ÿ</p>
                <div class="modal-buttons">
                    <button class="modal-btn cancel">å–æ¶ˆ</button>
                    <button class="modal-btn confirm">ç¢ºå®š</button>
                </div>
            </div>
        </div>

        <!-- ä¿®æ”¹é‡ç½®ç¢ºèªå½ˆçª— -->
        <div class="modal" id="resetModal">
            <div class="modal-content">
                <p>æ˜¯å¦ç¢ºå®šé‡ç½®ï¼Ÿ</p>
                <div class="modal-buttons">
                    <button class="modal-btn cancel">å–æ¶ˆ</button>
                    <button class="modal-btn confirm">ç¢ºå®š</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const points = document.querySelectorAll('.point');
            const pointModal = document.getElementById('pointModal');
            const saveConfirmModal = document.getElementById('saveConfirmModal');
            const modeBtns = document.querySelectorAll('.mode-btn');
            const sliderControl = document.querySelector('.slider-control');
            
            // æ¨¡å¼åˆ‡æ›
            modeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    modeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (this.dataset.mode === 'individual') {
                        sliderControl.classList.add('disabled');
                        points.forEach(p => p.classList.remove('disabled'));
                    } else {
                        sliderControl.classList.remove('disabled');
                        points.forEach(p => p.classList.add('disabled'));
                    }
                });
            });

            // äº’å‹•é»é»æ“Šè™•ç†
            points.forEach(point => {
                point.addEventListener('click', function() {
                    if (this.classList.contains('disabled')) return;
                    
                    // ç§»é™¤å…¶ä»–é»çš„ active ç‹€æ…‹
                    points.forEach(p => p.classList.remove('active'));
                    // è¨­ç½®ç•¶å‰é»çš„ active ç‹€æ…‹
                    this.classList.add('active');
                    
                    pointModal.style.display = 'block';
                });
            });

            // ä¿å­˜æŒ‰éˆ•é»æ“Šè™•ç†
            document.querySelector('.save-btn').addEventListener('click', function() {
                const pointModal = document.getElementById('pointModal');
                const activePoint = document.querySelector('.point.active');
                
                if (activePoint) {
                    // ä¿å­˜é»çš„ç‹€æ…‹
                    activePoint.classList.add('saved');
                    // æ›´æ”¹é»çš„é¡è‰²ç‚ºç¶ è‰²
                    const dot = activePoint.querySelector('.point-dot');
                    dot.style.background = 'var(--accent-color)';
                    dot.style.boxShadow = '0 0 0 2px var(--accent-color)';
                }
                
                pointModal.style.display = 'none';
                
                // ä¿å­˜æ•¸å€¼
                const sliderValue = document.querySelector('.modal-slider').value;
                localStorage.setItem('pointValue_' + activePoint.dataset.finger, sliderValue);
            });

            // ç¢ºèªä¿å­˜
            saveConfirmModal.querySelector('.confirm').addEventListener('click', function() {
                const activePoint = document.querySelector('.point.active');
                if (activePoint) {
                    activePoint.classList.add('saved');
                }
                saveConfirmModal.style.display = 'none';
                pointModal.style.display = 'none';
                
                // å»¶é²ä¸€ä¸‹å†è·³è½‰ï¼Œè®“ç”¨æˆ¶çœ‹åˆ°ä¿å­˜æ•ˆæœ
                setTimeout(() => {
                    window.location.href = 'custom.html'; // è·³å›è‡ªå®šç¾©é é¢
                }, 300);
            });

            // é—œé–‰å½ˆçª—
            document.querySelectorAll('.close-btn, .modal-btn.cancel').forEach(btn => {
                btn.addEventListener('click', function() {
                    pointModal.style.display = 'none';
                    saveConfirmModal.style.display = 'none';
                });
            });

            // é‡ç½®æŒ‰éˆ•é»æ“Šè™•ç†
            const resetBtn = document.querySelector('.reset-btn');
            resetBtn.addEventListener('click', function() {
                const resetModal = document.getElementById('resetModal');
                resetModal.style.display = 'flex';
            });

            // å„²å­˜æŒ‰éˆ•é»æ“Šè™•ç†
            const saveAllBtn = document.querySelector('.save-all-btn');
            saveAllBtn.addEventListener('click', function() {
                const saveConfirmModal = document.getElementById('saveConfirmModal');
                saveConfirmModal.style.display = 'flex';
            });

            // ç¢ºä¿å½ˆçª—æ­£å¸¸é¡¯ç¤ºå’Œé—œé–‰
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });

            // å–æ¶ˆæŒ‰éˆ•è™•ç†
            document.querySelectorAll('.modal-btn.cancel').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });

            // æ·»åŠ æ»‘å‹•æ¢å€¼çš„é¡¯ç¤º
            const modalSlider = document.querySelector('.modal-slider');
            modalSlider.addEventListener('input', function() {
                const sliderValue = document.querySelector('.slider-value');
                sliderValue.textContent = this.value + '%';
            });

            // ä¿®æ”¹é‡ç½®ç¢ºèªé‚è¼¯
            resetModal.querySelector('.confirm').addEventListener('click', function() {
                // é‡ç½®æ‰€æœ‰é»çš„ç‹€æ…‹
                points.forEach(point => {
                    point.classList.remove('saved');
                    const dot = point.querySelector('.point-dot');
                    dot.style.background = 'white';
                    dot.style.boxShadow = '0 0 0 2px var(--primary-color)';
                    
                    // æ¸…é™¤ä¿å­˜çš„æ•¸å€¼
                    localStorage.removeItem('pointValue_' + point.dataset.finger);
                });
                resetModal.style.display = 'none';
            });

            // ä¿®æ”¹ä¿å­˜æŒ‰éˆ•é»æ“Šè™•ç†
            document.querySelector('.save-all-btn').addEventListener('click', function() {
                const saveConfirmModal = document.getElementById('saveConfirmModal');
                saveConfirmModal.style.display = 'flex';
            });

            // ç¢ºèªä¿å­˜
            saveConfirmModal.querySelector('.confirm').addEventListener('click', function() {
                // åœ¨é€™è£¡æ·»åŠ ä¿å­˜é‚è¼¯
                points.forEach(point => {
                    if (point.classList.contains('saved')) {
                        const dot = point.querySelector('.point-dot');
                        dot.style.background = '#00ffbb';
                        dot.style.boxShadow = '0 0 0 2px #00ffbb';
                    }
                });
                saveConfirmModal.style.display = 'none';
            });

            // å–æ¶ˆä¿å­˜
            saveConfirmModal.querySelector('.cancel').addEventListener('click', function() {
                saveConfirmModal.style.display = 'none';
            });
        });
    </script>
</body>
</html>